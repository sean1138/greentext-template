<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<link rel="icon" type="image/png" href="clover-svgrepo-com.svg">
	<title>greentext template</title>
	<style>
		:root{
			/* allow animate to height:auto */
			interpolate-size: allow-keywords;
			--yot-bgc1: #F0E0D6;
			--yot-bgc2: #FFE;
			--yot-bd1: #D9BFB7;
			--yot-tc: #800000;
			--yot-nc: #117743;

			--yotb-bgc1: #D6DAF0;
			--yotb-bgc2: #EEF2FF;
			--yotb-bd1: #B7C5D9;
			--yotb-tc: #000;
			--yotb-nc: #117743;

			--fut-bgc1: #F0E0D6;
			--fut-bgc2: #FFE;
			--fut-bd1: #D9BFB7;
			--fut-tc: #800000;
			--fut-nc: #117743;

			--bur-bgc1: #D6DAF0;
			--bur-bgc2: #EEF2FF;
			--bur-bd1: #B7C5D9;
			--bur-tc: #000;
			--bur-nc: #117743;

			--tom-bgc1: #282A2E;
			--tom-bgc2: #1D1F21;
			--tom-bd1: #282a2e;
			--tom-tc: #c5c8c6;
			--tom-nc: #c5c8c6;

			--pho-bgc1: #DDD;
			--pho-bgc2: #EEE;
			--pho-bd1: #CCC;
			--pho-tc: #333;
			--pho-nc: #004A99;

			--accw-bgc1: #F0E0D6;
			--accw-bgc2: #FFE;
			--accw-bd1: #D9BFB7;
			--accw-tc: #800000;
			--accw-nc: #117743;
			--accw-gt: #496600;

			--accc-bgc1: #D6DAF0;
			--accc-bgc2: #EEF2FF;
			--accc-bd1: #B7C5D9;
			--accc-tc: #000;
			--accc-nc: #117743;
			--accc-gt: #496600;

			--gt1: #789922;
			--gt2: #b5bd68;

			--ff1: arial, helvetica, sans-serif;
			--fs1: 10pt;

			--ff2: 'Times New Roman', serif;
			--fs2: 12pt;

		}
		body {
			display: flex;
			flex-direction: column;
			/*place-content: center;*/
			place-items: center;
			height: 100vh;
			box-sizing: border-box;
			padding: 0;
			margin: 0;
			font-family: var(--ff1);
			font-size: var(--fs1);
			background: var(--yot-bgc2);
			color: var(--yot-tc);
		}
		.yotsuba{
			background: var(--yot-bgc2);
			color: var(--yot-tc);
			& .post{
				background: var(--yot-bgc1);
				border-color: var(--yot-bd1);
			}
			& .name{
				color:var(--yot-nc);
			}
			& textarea{
				font-family: var(--ff1);
				font-size: var(--fs1);
			}
			& fieldset{
				border-color: var(--yot-bd1);
			}
			& footer{
				border-top: 1px solid var(--yot-bd1);
			}
		}
		.yotsuba-b{
			background: var(--yotb-bgc2);
			color: var(--yotb-tc);
			& .post{
				background: var(--yotb-bgc1);
				border-color: var(--yotb-bd1);
			}
			& .name{
				color:var(--yotb-nc);
			}
			& textarea{
				font-family: var(--ff1);
				font-size: var(--fs1);
			}
			& fieldset{
				border-color: var(--yotb-bd1);
			}
			& footer{
				border-top: 1px solid var(--yotb-bd1);
			}
		}
		.futaba{
			background: var(--fut-bgc2);
			color: var(--fut-tc);
			font-size: var(--fs2);
			font-family: var(--ff2);
			& .post{
				background: var(--fut-bgc1);
				border-color: var(--fut-bd1);
			}
			& .name{
				color:var(--fut-nc);
			}
			& textarea{
				font-family: var(--ff2);
				font-size: var(--fs2);
			}
			& fieldset{
				border-color: var(--fut-bd1);
			}
			& footer{
				border-top: 1px solid var(--fut-bd1);
			}
		}
		.burichan{
			background: var(--bur-bgc2);
			color: var(--bur-tc);
			font-size: var(--fs2);
			font-family: var(--ff2);
			& .post{
				background: var(--bur-bgc1);
				border-color: var(--bur-bd1);
			}
			& .name{
				color:var(--bur-nc);
			}
			& textarea{
				font-family: var(--ff2);
				font-size: var(--fs2);
			}
			& fieldset{
				border-color: var(--bur-bd1);
			}
			& footer{
				border-top: 1px solid var(--bur-bd1);
			}
		}
		.tomorrow{
			background: var(--tom-bgc2);
			color: var(--tom-tc);
			& .post{
				background: var(--tom-bgc1);
				border-color: var(--tom-bd1);
			}
			& .name{
				color:var(--tom-nc);
			}
			& textarea{
				color: var(--gt2);
				font-family: var(--ff1);
				font-size: var(--fs1);
			}
			& fieldset{
				border-color: var(--tom-bd1);
			}
			& footer{
				border-top: 1px solid var(--tom-bd1);
			}
		}
		.photon{
			background: var(--pho-bgc2);
			color: var(--pho-tc);
			& .post{
				background: var(--pho-bgc1);
				border-color: var(--pho-bd1);
			}
			& .name{
				color:var(--pho-nc);
			}
			& textarea{
				font-family: var(--ff1);
				font-size: var(--fs1);
			}
			& fieldset{
				border-color: var(--pho-bd1);
			}
			& footer{
				border-top: 1px solid var(--pho-bd1);
			}
		}
		.accessible-warm{
			background: var(--accw-bgc2);
			color: var(--accw-tc);
			& .post{
				background: var(--accw-bgc1);
				border-color: var(--accw-bd1);
			}
			& .name{
				color:var(--accw-nc);
			}
			& textarea{
				font-family: var(--ff1);
				font-size: var(--fs1);
				color: var(--accw-gt);
			}
			& fieldset{
				border-color: var(--accw-bd1);
			}
			& footer{
				border-top: 1px solid var(--accw-bd1);
			}
		}
		.accessible-cold{
			background: var(--accc-bgc2);
			color: var(--accc-tc);
			& .post{
				background: var(--accc-bgc1);
				border-color: var(--accc-bd1);
			}
			& .name{
				color:var(--accc-nc);
			}
			& textarea{
				font-family: var(--ff1);
				font-size: var(--fs1);
				color: var(--accc-gt);
			}
			& fieldset{
				border-color: var(--accc-bd1);
			}
			& footer{
				border-top: 1px solid var(--accc-bd1);
			}
		}
		header{
			margin:0 1rem 1rem 1rem;
			place-self:normal;
		}
		main{
			display: flex;
				flex-direction: column;
			width:100%;
		}
		section.first{
			margin: 1rem;
			width: fit-content;
			place-self:center;
		}
		section.second{
			display:flex;
			width:100%;
		}
		.post {
			display: flex;
			flex-direction: column;
			border: 1px solid var(--yot-bd1);
			border-left: none;
			border-top: none;
		}
		span.name {
			color: var(--yot-nc);
			font-weight: bold;
		}
		.posteruid .hand {
			padding: 0 5px;
			border-radius: 6px;
			font-size: 0.8em;
		}
		.flag {
			display: inline-block;
			width: 16px;
			height: 11px;
			position: relative;
			top: 1px;
			background: url('flags.png') no-repeat;
			background-position: -32px -24px;
		}
		textarea {
			box-sizing: border-box;
			display: block;
			padding: var(--fs1) 40px;
			width: 90%;
			height: auto;
			min-height: fit-content;
			border: none;
			resize: none;
			order: 2;
			color: var(--gt1);
			background: transparent;
			/*font-family: var(--ff1);
			font-size: var(--fs1);*/
		}
		details{
			cursor:pointer;
			overflow:hidden;
			place-self: normal;
			margin:1rem;
		}
		details::details-content{
			/* into the shadow dom */
			block-size:0;
			transition:block-size 1s, content-visibility 1s;
			transition-behavior: allow-discrete;
		}
		details[open]::details-content{
			block-size:auto;

		}
		fieldset{
			margin:1rem;
			border-width: 1px;
		}
		footer {
			display: flex;
			flex-direction: column;
			place-items: center;
			margin-top: auto;
			width:100%;
			font-size: 10px;
		}
		dialog{
			display:none;
			opacity:0;
			translate: 0 -25vh;
			transition-property: overlay display opacity;
			transition-duration: 1s;
			transition-behavior: allow-discrete;
		}
		dialog[open]{
			display:block;
			width: 80ch;
			opacity:1;
			translate: 0 0;
			@starting-style{
				opacity:0;
				translate: 0 25vh;
			}
		}
		dialog::backdrop{
			transition-property: overlay display opacity;
			transition-duration: 1s;
			transition-behavior: allow-discrete;
			opacity:0;
			background:black;
		}
		dialog[open]::backdrop{
			/*display:none;*/
			opacity: .8;
		}
		@starting-style{
			dialog[open]::backdrop{
				opacity:0;
				translate: 0 25vh;
			}
		}
		/* only color, background-color, cursor, outline, text-decoration, text-emphasis-color and text-shadow */
		::selection {
			color: hsla(28, 0%, 95%, 1);
			background: hsla(0, 100%, 5%, 1);

			/*		background:linear-gradient(to bottom, hsla(10, 23%, 16%, 1), hsla(0, 100%, 1%, 1));*/
		}
	</style>
</head>

<body class="yotsuba">
	<header>
		<h1>Greentext Template</h1>
		<ol>
			<li>edit the greentext below</li>
			<li>change Options/Controls (optional)</li>
			<li>screenshot</li>
			<li>???</li>
			<li>PROFIT!</li>
		</ol>
	</header>
	<main>
		<section class="first">
			<div id="zoomer" class="post">
				<div class="postInfo desktop"><input type="checkbox"> <span class="nameBlock"><span class="name">Anonymous</span> <span class="posteruid">(ID: <span id="randomStringSpan" class="hand" title="Highlight posts by this ID" style="background-color: rgb(49, 168, 232); color: black;">8008135!</span>)</span> <span class="flag"></span></span> <span class="dateTime" data-utc="1733854490">12/10/24(Tue)13:14:50</span></div>
				<textarea name="woo" id="woo1" cols="80" rows="3" spellcheck="false">>be me &#13;>ask chatgpt how to add > to each new line &#13;>mfw it works</textarea>
			</div>
		</section>
		<section class="second">
			<details class="controls">
				<summary>Options/Controls</summary>
				<fieldset>
					<legend>Random Things</legend>
					<button id="generateStringButton">Change ID</button>
					<button id="changeColorButton">Change ID Color</button>
					<button id="changeFlagButton">Change Flag</button>
					<button id="randomDateButton" aria-label="Generate Random Date">Change Date</button>
					<label for="zoomSelector">Set Zoom:</label>
					<select id="zoomSelector">
						<option value="100%">100%</option>
						<option value="110%">110%</option>
						<option value="125%">125%</option>
						<option value="150%">150%</option>
						<option value="175%">175%</option>
						<option value="180%">180%</option>
						<option value="200%">200%</option>
					</select>
				</fieldset>
				<fieldset>
					<legend>Set Specific Date and Time</legend>
					<label for="manualDatePicker">Select Date:</label>
					<input type="date" id="manualDatePicker" aria-labelledby="setDateButton">
					<label for="manualTimePicker">Select Time:</label>
					<input type="time" id="manualTimePicker" value="00:00" aria-labelledby="setDateButton">
					<button id="setDateButton">Set Selected Date and Time</button>
				</fieldset>
				<fieldset>
					<legend>Change the Theme</legend>
					<select id="themeSelector">
						<option value="yotsuba">Yotsuba</option>
						<option value="yotsuba-b">Yotsuba B</option>
						<option value="futaba">Futaba</option>
						<option value="burichan">Burichan</option>
						<option value="tomorrow">Tomorrow</option>
						<option value="photon">Photon</option>
						<option value="accessible-warm">Accessible Warm</option>
						<option value="accessible-cold">Accessible Cold</option>
					</select>
				</fieldset>
				<fieldset>
					<legend>Save/Clear Settings</legend>
					<button id="saveSettingsButton">Save Settings</button>
					<button id="clearSettingsButton">Clear Settings</button>
				</fieldset>
			</details>
		</section>
	</main>
	<footer>
		<p>All trademarks and copyrights on this page are owned by their respective parties. Images uploaded are the responsibility of the Poster. Comments are owned by the Poster.</p>
		<p id="footer-links"><a href="javascript:void();" class="open-modal">About</a><!-- • <a href="//www.4chan.org/feedback" target="_blank">Feedback</a> • <a href="//www.4chan.org/legal" target="_blank">Legal</a> • <a href="//www.4chan.org/contact" target="_blank">Contact</a> -->
		</p>
	</footer>
	<dialog id="modal">
		<h2>About</h2>
		<p>i wanted a quick and dirty way to type my own greentext for some luls so i googled "greentext template" and found ai greentext generators, images, stupid reddit threads, quora explaining greentext, just garbage! so i made this. initial buildout took maybe 3 hours (i suck with js) and then more tweaks done more lazily over time.</p>
		<button class="close-modal">close</button>
	</dialog>

	<script>
		// Save settings setup
		const settingsState = {
				settingID: null,
				settingIDColor: null,
				settingFlag: null,
				settingDate: null,
				settingTheme: null,
				settingZoom: null,
		};

		// Save & clear settings
		function saveSettingsToLocalStorage() {
				localStorage.setItem("greentextSettings", JSON.stringify(settingsState));
				alert("Settings saved!");
		}

		function clearLocalStorage() {
				// Remove saved settings from localStorage
				localStorage.removeItem("greentextSettings");
				alert("Settings cleared!");

				// Reset settingsState
				settingsState.settingID = null;
				settingsState.settingIDColor = null;
				settingsState.settingFlag = null;
				settingsState.settingDate = null;
				settingsState.settingTheme = null;
				settingsState.settingZoom = null;

				// Reset all page elements to their defaults

				// Reset ID span
				document.getElementById("randomStringSpan").textContent = "8008135!";

				// Reset ID color
				const spanElement = document.querySelector("span#randomStringSpan");
				spanElement.style.backgroundColor = "rgb(49, 168, 232)"; // Reset to default background color
				spanElement.style.color = "black"; // Reset to default text color

				// Reset flag
				document.querySelector(".flag").style.backgroundPosition = "";

				// Reset date and time
				const dateTimeSpan = document.querySelector(".dateTime");
				dateTimeSpan.textContent = "07/04/1776 choose a date/time or reload page"; // Clear displayed date and time
				document.getElementById("manualDatePicker").value = ""; // Clear date picker
				document.getElementById("manualTimePicker").value = "00:00"; // Reset time picker to 00:00

				// Reset theme
				document.body.className = "yotsuba"; // Reset body class
				document.getElementById("themeSelector").value = "yotsuba"; // Set theme dropdown to default

				// Reset zoom
				document.querySelector("#zoomer").style.zoom = ""; // Reset zoom level
				document.getElementById("zoomSelector").value = "100%"; // Set zoom dropdown to default
		}


		document.getElementById("saveSettingsButton").addEventListener("click", saveSettingsToLocalStorage);
		document.getElementById("clearSettingsButton").addEventListener("click", clearLocalStorage);

		// Load settings
		function loadSettingsFromLocalStorage() {
				const savedSettings = localStorage.getItem("greentextSettings");
				if (savedSettings) {
						const parsedSettings = JSON.parse(savedSettings);

						// Apply settings if they exist
						if (parsedSettings.settingID) {
								changeID(parsedSettings.settingID);
						}
						if (parsedSettings.settingIDColor) {
								const { currentIndex: savedIndex, useDarkColors: savedUseDarkColors } = parsedSettings.settingIDColor;
								currentIndex = savedIndex; // Restore the index
								useDarkColors = savedUseDarkColors; // Restore the color set

								const colors = useDarkColors ? darkBgColors : lightBgColors;
								const spanElement = document.querySelector("span#randomStringSpan");
								spanElement.style.backgroundColor = colors[currentIndex - 1];
								spanElement.style.color = useDarkColors ? "white" : "black";
						}
						if (parsedSettings.settingFlag !== null) {
								restoreFlag(parsedSettings.settingFlag);
						}
						if (parsedSettings.settingDate) {
								changeDate(parsedSettings.settingDate);

								// Pre-fill the date and time inputs
								const datePicker = document.getElementById("manualDatePicker");
								const timePicker = document.getElementById("manualTimePicker");
								const savedDate = new Date(parsedSettings.settingDate); // Convert to Date object

								// Format and set date
								datePicker.value = savedDate.toISOString().split("T")[0];

								// Format and set time
								timePicker.value = savedDate.toTimeString().split(" ")[0].slice(0, 5);
						}
						if (parsedSettings.settingTheme) {
								changeTheme(parsedSettings.settingTheme);

								// Set dropdown to match the loaded theme
								const themeSelector = document.getElementById("themeSelector");
								themeSelector.value = parsedSettings.settingTheme;
						}
						if (parsedSettings.settingZoom) {
								changeZoom(parsedSettings.settingZoom);

								// Set zoom dropdown to match the loaded zoom level
								const zoomSelector = document.getElementById("zoomSelector");
								zoomSelector.value = parsedSettings.settingZoom;
						}
				}
		}

		// Define functions for applying settings
		function changeID(newID) {
				document.getElementById("randomStringSpan").textContent = newID;
				settingsState.settingID = newID;
		}

		function changeFlag(flagValue) {
				document.querySelector(".flag").style.backgroundPosition = flagValue;
				settingsState.settingFlag = flagValue;
		}

		function changeDate(date) {
				document.querySelector(".dateTime").textContent = date;
				settingsState.settingDate = date; // Save to the state
		}

		function changeTheme(themeClass) {
				document.body.className = themeClass;
				settingsState.settingTheme = themeClass;
		}

		function changeZoom(zoomLevel) {
				document.querySelector("#zoomer").style.zoom = zoomLevel; // or transform: scale(zoomLevel);
				settingsState.settingZoom = zoomLevel;
		}

		// Load settings on page load
		document.addEventListener("DOMContentLoaded", () => {
				loadSettingsFromLocalStorage();
		});

		// Set and change the date
		document.addEventListener("DOMContentLoaded", function () {
				const dateTimeSpan = document.querySelector(".dateTime");

				// Format a date into "MM/DD/YY(Day)HH:mm:ss"
				function formatDate(date) {
						const days = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
						const month = String(date.getMonth() + 1).padStart(2, "0");
						const day = String(date.getDate()).padStart(2, "0");
						const year = String(date.getFullYear()).slice(-2);
						const hours = String(date.getHours()).padStart(2, "0");
						const minutes = String(date.getMinutes()).padStart(2, "0");
						const seconds = String(date.getSeconds()).padStart(2, "0");
						const dayName = days[date.getDay()];
						return `${month}/${day}/${year}(${dayName})${hours}:${minutes}:${seconds}`;
				}

				// Generate a random date between Oct 1, 2003, and today
				function getRandomDate() {
						const start = new Date("2003-10-01").getTime();
						const end = new Date().getTime();
						const randomTime = Math.floor(Math.random() * (end - start + 1)) + start;
						return new Date(randomTime);
				}

				// Set date and time from the date and time pickers
				function setManualDate() {
						const dateInput = document.getElementById("manualDatePicker").value; // Get selected date
						const timeInput = document.getElementById("manualTimePicker").value; // Get selected time
						if (dateInput) {
								const selectedDate = new Date(dateInput);
								if (timeInput) {
										const [hours, minutes] = timeInput.split(":").map(Number);
										selectedDate.setHours(hours, minutes, 0);
								}
								const formattedDate = formatDate(selectedDate);
								dateTimeSpan.textContent = formattedDate;
								settingsState.settingDate = formattedDate; // Save the setting
						} else {
								alert("Please select a date!");
						}
				}

				// Attach event listeners
				document.getElementById("randomDateButton").addEventListener("click", function () {
						const randomDate = getRandomDate();
						const formattedDate = formatDate(randomDate);
						dateTimeSpan.textContent = formattedDate;
						settingsState.settingDate = formattedDate; // Save the setting
				});

				document.getElementById("setDateButton").addEventListener("click", setManualDate);

				// Initialize the date span with the last saved date if available
				if (settingsState.settingDate) {
						dateTimeSpan.textContent = settingsState.settingDate;
				} else {
						// Or display the current date and time when the page loads
						const now = new Date();
						const formattedNow = formatDate(now);
						dateTimeSpan.textContent = formattedNow;
						settingsState.settingDate = formattedNow; // Save the current date
				}
		});
		// Event listener for the "Set Date" button makes the it show the correct values if they were retrieved from localstorage
		document.getElementById("setDateButton").addEventListener("click", function () {
				const dateInput = document.getElementById("manualDatePicker").value; // Get selected date
				const timeInput = document.getElementById("manualTimePicker").value; // Get selected time

				if (dateInput) {
						const selectedDate = new Date(dateInput); // Create a Date object from the selected date

						if (timeInput) {
								const [hours, minutes] = timeInput.split(":").map(Number); // Parse the time
								selectedDate.setHours(hours, minutes, 0); // Set hours and minutes
						}

						changeDate(selectedDate.toISOString()); // Update the UI
						settingsState.settingDate = selectedDate.toISOString(); // Save ISO date to settingsState
						saveSettingsToLocalStorage(); // Save to localStorage
				} else {
						alert("Please select a date!");
				}
		});


		// Restore flag from saved setting
		function restoreFlag(flagIndex) {
				const spanFlag = document.querySelector("span.flag");

				// Define sprite sheet configurations
				const spriteSheets = [
						{
								url: "flags.png",       // Sprite 1
								columns: 5,            // Number of flags per row (80px wide / 16px per flag)
								rows: 5,               // Number of rows (60px tall / 12px per flag)
								flagHeight: 12         // Height of each flag in this sprite
						},
						{
								url: "flags.8.png",    // Sprite 2
								columns: 16,           // Number of flags per row (256px wide / 16px per flag)
								rows: 17,              // Number of rows (187px tall / 11px per flag)
								flagHeight: 11         // Height of each flag in this sprite
						}
				];

				// Determine which sprite sheet was used based on the flagIndex
				let cumulativeFlags = 0;
				let selectedSprite;
				for (const sprite of spriteSheets) {
						const totalFlagsInSprite = sprite.columns * sprite.rows;
						if (flagIndex < cumulativeFlags + totalFlagsInSprite) {
								selectedSprite = sprite;
								flagIndex -= cumulativeFlags;
								break;
						}
						cumulativeFlags += totalFlagsInSprite;
				}

				if (!selectedSprite) {
						console.error("Invalid flag index");
						return;
				}

				const col = flagIndex % selectedSprite.columns; // Column (x position)
				const row = Math.floor(flagIndex / selectedSprite.columns); // Row (y position)
				// Set the flag's background image and position
				spanFlag.style.backgroundImage = `url('${selectedSprite.url}')`;
				spanFlag.style.backgroundPositionX = `-${col * 16}px`; // Move x by flag width
				spanFlag.style.backgroundPositionY = `-${row * selectedSprite.flagHeight}px`; // Adjust y by flag height
				spanFlag.style.backgroundSize = `${selectedSprite.columns * 16}px ${selectedSprite.rows * selectedSprite.flagHeight}px`; // Ensure scaling matches flag sizes

				settingsState.settingFlag = flagIndex; // Update settings state
		}

		// Change flag
		document.getElementById("changeFlagButton").addEventListener("click", function () {
				const spanFlag = document.querySelector("span.flag");
				// Define sprite sheet configurations
				const spriteSheets = [
						{
								url: "flags.png",       // Sprite 1
								columns: 5,            // Number of flags per row (80px wide / 16px per flag)
								rows: 5,               // Number of rows (60px tall / 12px per flag)
								flagHeight: 12         // Height of each flag in this sprite
						},
						{
								url: "flags.8.png",    // Sprite 2
								columns: 16,           // Number of flags per row (256px wide / 16px per flag)
								rows: 17,              // Number of rows (187px tall / 11px per flag)
								flagHeight: 11         // Height of each flag in this sprite
						}
				];
				// Randomly select a sprite sheet
				const sprite = spriteSheets[Math.floor(Math.random() * spriteSheets.length)];
				// Calculate total number of flags in the selected sprite
				const totalFlags = sprite.columns * sprite.rows;
				// Randomly select a flag from the selected sprite
				const flagIndex = Math.floor(Math.random() * totalFlags);
				const col = flagIndex % sprite.columns; // Column (x position)
				const row = Math.floor(flagIndex / sprite.columns); // Row (y position)
				// Set the flag's background image and position
				spanFlag.style.backgroundImage = `url('${sprite.url}')`;
				spanFlag.style.backgroundPositionX = `-${col * 16}px`; // Move x by flag width
				spanFlag.style.backgroundPositionY = `-${row * sprite.flagHeight}px`; // Adjust y by flag height
				spanFlag.style.backgroundSize = `${sprite.columns * 16}px ${sprite.rows * sprite.flagHeight}px`; // Ensure scaling matches flag sizes
				settingsState.settingFlag = flagIndex; // Save the setting in the state object
		});

		// Theme changer
		const themeSelector = document.getElementById("themeSelector");
		const body = document.body;
		// Default class for the body
		body.className = "yotsuba";
		// Event listener to change the class on the body when the selection changes
		themeSelector.addEventListener("change", () => {
				const selectedTheme = themeSelector.value;
				body.className = selectedTheme;
				settingsState.settingTheme = selectedTheme; // Save the setting in the state object
		});
		// Event listener for theme selector makes the dropdown show the correct theme if it was retrieved from localstorage
		document.getElementById("themeSelector").addEventListener("change", function () {
				const selectedTheme = this.value; // Get the selected theme
				changeTheme(selectedTheme); // Apply the theme
				settingsState.settingTheme = selectedTheme; // Save the theme to the state
		});

		// Zoom changer
		const zoomSelector = document.getElementById("zoomSelector");
		const zoomElement = document.getElementById("zoomer");
		// Default zoom level
		zoomElement.style.zoom = "100%";
		// Event listener to change the zoom level
		zoomSelector.addEventListener("change", () => {
				const selectedZoom = zoomSelector.value;
				zoomElement.style.zoom = selectedZoom;
				settingsState.settingZoom = selectedZoom; // Save the setting in the state object
		});
		// Event listener for zoom selector makes the dropdown show the correct zoom if it was retrieved from localstorage
		document.getElementById("zoomSelector").addEventListener("change", function () {
				const selectedZoom = this.value; // Get the selected zoom level
				changeZoom(selectedZoom); // Apply the zoom
				settingsState.settingZoom = selectedZoom; // Save the zoom level to the state
		});

		// Random ID string generator
		function generateRandomString(length) {
				const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-=_";
				let result = "";
				for (let i = 0; i < length; i++) {
						const randomIndex = Math.floor(Math.random() * chars.length);
						result += chars[randomIndex];
				}
				return result; // Return the generated string
		}
		document.getElementById("generateStringButton").addEventListener("click", function () {
				const randomString = generateRandomString(8); // Generate the random string
				document.getElementById("randomStringSpan").textContent = randomString; // Display the string
				settingsState.settingID = randomString; // Save the string in the settingsState
		});


		// change ID bgc
		const darkBgColors = ["blue", "green", "purple", "teal"]; // Colors needing white text
		const lightBgColors = ["yellow", "orange", "pink", "lightgray"]; // Colors needing black text
		let currentIndex = 0; // Tracks the current color index
		let useDarkColors = true; // Toggles between color sets
		document.getElementById("changeColorButton").addEventListener("click", function () {
				const spanElement = document.querySelector("span#randomStringSpan");

				// Choose the appropriate color set
				const colors = useDarkColors ? darkBgColors : lightBgColors;

				// Set the background color and text color
				spanElement.style.backgroundColor = colors[currentIndex];
				spanElement.style.color = useDarkColors ? "white" : "black";

				// Move to the next color in the array
				currentIndex = (currentIndex + 1) % colors.length;

				// Toggle color set if at the end of one set
				if (currentIndex === 0) {
						useDarkColors = !useDarkColors;
				}
				settingsState.settingIDColor = {currentIndex, useDarkColors}; // Save the setting in the state object
		});

		// change flag
		document.getElementById("changeFlagButton").addEventListener("click", function () {
				const spanFlag = document.querySelector("span.flag");
				// Define sprite sheet configurations
				const spriteSheets = [
						{
								url: "flags.png",       // Sprite 1
								columns: 5,            // Number of flags per row (80px wide / 16px per flag)
								rows: 5,               // Number of rows (60px tall / 12px per flag)
								flagHeight: 12         // Height of each flag in this sprite
						},
						{
								url: "flags.8.png",    // Sprite 2
								columns: 16,           // Number of flags per row (256px wide / 16px per flag)
								rows: 17,              // Number of rows (187px tall / 11px per flag)
								flagHeight: 11         // Height of each flag in this sprite
						}
				];
				// Randomly select a sprite sheet
				const sprite = spriteSheets[Math.floor(Math.random() * spriteSheets.length)];
				// Calculate total number of flags in the selected sprite
				const totalFlags = sprite.columns * sprite.rows;
				// Randomly select a flag from the selected sprite
				const flagIndex = Math.floor(Math.random() * totalFlags);
				const col = flagIndex % sprite.columns; // Column (x position)
				const row = Math.floor(flagIndex / sprite.columns); // Row (y position)
				// Set the flag's background image and position
				spanFlag.style.backgroundImage = `url('${sprite.url}')`;
				spanFlag.style.backgroundPositionX = `-${col * 16}px`; // Move x by flag width
				spanFlag.style.backgroundPositionY = `-${row * sprite.flagHeight}px`; // Adjust y by flag height
				spanFlag.style.backgroundSize = `${sprite.columns * 16}px ${sprite.rows * sprite.flagHeight}px`; // Ensure scaling matches flag sizes
				settingsState.settingFlag = flagIndex; // Save the setting in the state object
		});



		// autosize the textarea
		document.addEventListener("input", function (event) {
				if (event.target.tagName === "TEXTAREA" && event.target.id === "woo1") {
						event.target.style.height = "auto"; // Reset height to calculate the new height
						event.target.style.height = event.target.scrollHeight + "px"; // Adjust height
				}
		});
		// insert char at start of each new line
		document.getElementById("woo1").addEventListener("keydown", function (event) {
				// Check if the Enter key is pressed
				if (event.key === "Enter") {
						// Prevent the default new line behavior
						event.preventDefault();
						// Get the current caret position
						const cursorPosition = this.selectionStart;
						// Insert a new line followed by ">"
						const textBeforeCursor = this.value.substring(0, cursorPosition);
						const textAfterCursor = this.value.substring(cursorPosition);
						this.value = textBeforeCursor + "\n>" + textAfterCursor;
						// Move the caret to the correct position after the new ">" symbol
						this.selectionStart = this.selectionEnd = cursorPosition + 3; // 3 accounts for `\n> `
				}
		});








		// dialog modal
		const modal = document.querySelector("#modal");
		const openModal = document.querySelector(".open-modal");
		const closeModal = document.querySelector(".close-modal");
		openModal.addEventListener("click", () => {
			modal.showModal();
		});
		closeModal.addEventListener("click", () => {
			modal.close();
		});
	</script>
</body>

</html>